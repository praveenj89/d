<?php
 function city_menu() {
    
    $item['admin/city'] = array(
        'title' => 'Ajax List Load',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('city'),
        'access callback' => true,
        'type' => MENU_NORMAL_ITEM,
    );
	
	$item['admin/manage_city'] = array(
        'title' => 'Manage Cities',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('manage_city'),
        'access callback' => true,
        'type' => MENU_NORMAL_ITEM,
    );
	$item['admin/view_city'] = array(
        'title' => 'View Cities',
        'page callback' => 'drupal_get_form',
		'page callback' => 'custom_table_page_display',
        'access callback' => true,
        'type' => MENU_NORMAL_ITEM,
    );
		
     return $item;
}

/*function custom_table_page_display() {

  $result = db_query('SELECT * FROM {country}');
  $records = $result->fetchAll();
  $content = '<pre>' . print_r($records, TRUE) . '</pre>';
  return $content;

}*/
function custom_table_page_display() {

  $header = array(
    array('data' => t('id'), 'field' => 'id', 'sort' => 'ASC'),
    array('data' => t('country'), 'colspan' => 2),
  );

  $query = db_select('country', 'u');

  $query->fields('u', array('id','country'));  // select your required fields here

  $table_sort = $query->extend('TableSort') // Add table sort extender.

                      ->orderByHeader($header); // Add order by headers.

  $pager = $table_sort->extend('PagerDefault')

                      ->limit(20);  // here you can limit the number of data per page.

  $result = $pager->execute();

  $rows = array();
  foreach($result as $res) {
    $rows[] = array($res->id, 
                    $res->country,);
  }
  // If rows are not empty theme and display the rows.

  $output = '';

  if (!empty($rows)) {

    $output = theme('table', array('header' => $header, 'rows' => $rows, 'attributes' => array('id' => 'sort-table')));

    $output .= theme('pager');

  }

  else {

    $output .= t("No results found.");

  }

  return $output;

}

function main_page2() {
  return drupal_get_form('city');
  return drupal_get_form('manage_city');
}

function manage_city($form, &$form_state) {
     $form = array();
        
     $det='';
     $opt = db_select('country','n')->fields('n',array('id','country'))-> orderBy('country', 'ASC')->execute()->fetchAll();
     $det=array();
       foreach($opt as $dett)
		{
			$det[$dett->id] = $dett->country;
		}
		
   
	
$form['city'] = array(
    '#type' => 'textfield',
    '#title' => t("Enter City name"),
	'#required' => TRUE,
  );
  
  $form['c_id'] = array(
	'#type' => 'select',
	'#title' => t("Select Country"),
	'#options' => $det,
  );
	$form['status'] = array(
		'#type' => 'select',
		'#title' => t("Status"),
		'#options' => array(t('Active'), t('Inactive')),
	);

	$form['submit'] = array(
		'#value' => 'Add City',
		'#type' => 'submit',
	);

  return $form;
}




 